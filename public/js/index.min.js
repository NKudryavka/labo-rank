(function(){angular.module("index",["common"]).service("labolist",["$rootScope","$http","events",function(t,n,r){return n.get("/api/labolist").success(function(n){return t.$broadcast(r.labolist.load,n)}).error(function(t,n){return alert("Error: "+n)})}]).service("points",["$rootScope","$http","events",function(t,n,r){return n.get("/api/points").success(function(n){return t.$broadcast(r.points.load,n)}).error(function(t,n){return alert("Error: "+n)})}]).filter("choiceFilter",[function(){var t;return t=function(t){var n;return t&&t.choice?/^B\d$/.test(t.choice.id)?(n=parseInt(t.choice.id.slice(1)),function(t){var r;return 100*n<(r=t.choice.id)&&100*(n+1)>r}):function(n){return n.choice.id===t.choice.id}:function(){return!0}},function(n,r){var e,o,i,a,l;if(!n)return[];for(l=[],e=t(r),o=0,i=n.length;i>o;o++)a=n[o],e(a)&&l.push(a);return l}}]).directive("stats",["events",function(t){var n;return n=2,function(r,e){var o,i,a,l,c,u,s,f;return f=d3.select(e.children()[n]).append("svg").attr("width","100%").attr("height","200px"),o=s=u=null,c=[],l=[],r.step=5,i=function(){var t,n,r,e,i;return f.selectAll("*").remove(),c.length?(e=d3.layout.histogram().range([0,150]).bins(o),t=e(l),i=Math.max.apply(null,t.map(function(t){return t.length})),r=function(t){return t*(100/i)},n=f.selectAll("rect").data(e(l)).enter(),n.append("rect").attr("x",function(t,n){return n*s+"%"}).attr("y",function(t){return 100-r(t.y)+"%"}).attr("width",function(){return u+"%"}).attr("height",function(t){return r(t.y)+"%"}).attr("fill","#3af"),n.append("text").text(function(t){return t.y?t.x+"ï½ž":void 0}).attr("x",function(t,n){return n*s+u/2+"%"}).attr("y",function(t,n){return n%2?"195px":"180px"}).attr("width",u+"%").attr("text-anchor","middle")):void 0},a=function(t,n){var e,o,a,u,s;for(Array.isArray(n)&&(c=n),l=[],s=0,e=0,o=c.length;o>e;e++)u=c[e],l.push(u.point),s+=u.point;return r.average=s/l.length,a=l[parseInt(l.length/2)],!l.length||l.length%2||(a=(a+l[parseInt(l.length/2)-1])/2),r.median=a,i()},r.$on(t.points.change,a),r.$on(t.points.load,a),r.$watch("step",function(t){var n,r,e;for(o=[],n=r=60,e=parseFloat(t);120>=r;n=r+=e)o.push(n);return s=100/(o.length-1),u=.9*s,i()})}}]).controller("MainController",["$scope","$filter","events","labolist","points",function(t,n,r){var e,o,i;return t.overlay=!0,o={labolist:!0,points:!0},t.filter=null,i=null,e=n("choiceFilter"),t.$on(r.labolist.load,function(n,r){return t.labolist=r,o.labolist=!1,t.overlay=o.points}),t.$on(r.points.load,function(n,r){return i=r,t.points=e(i,t.filter),o.points=!1,t.overlay=o.labolist}),t.$watch("filter",function(){var n;return n=e(i,t.filter),t.points=n,t.$emit(r.points.change,n)},!0)}])}).call(this);
//# sourceMappingURL=map/index.min.js.map